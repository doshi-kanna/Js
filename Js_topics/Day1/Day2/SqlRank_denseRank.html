<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Today's SQL Learning — Employee / Institute / Prod</title>
<style>
  /* Professional, responsive layout */
  :root{
    --accent:#0f62fe;
    --muted:#6b7280;
    --card:#ffffff;
    --bg:#f4f6fb;
    --success:#16a34a;
    --warn:#b45309;
  }
  *{box-sizing:border-box}
  body{font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin:0; background:var(--bg); color:#0f172a; line-height:1.5}
  .sidebar{position:fixed;left:0;top:0;bottom:0;width:240px;background:#fff;border-right:1px solid #e6eef6;padding:24px;overflow:auto}
  .brand{font-weight:700;color:var(--accent);font-size:18px;margin-bottom:10px}
  .nav a{display:block;padding:8px 10px;color:#0f172a;border-radius:6px;margin:6px 0;text-decoration:none}
  .nav a:hover{background:#f0f6ff;color:var(--accent)}
  .container{margin-left:260px;padding:28px;max-width:1100px}
  header h1{margin:0 0 8px 0;font-size:24px;color:#072147}
  header p{margin:0 0 18px 0;color:var(--muted)}
  .card{background:var(--card);padding:18px;border-radius:10px;box-shadow:0 6px 20px rgba(11,20,50,0.04);margin-bottom:18px;border:1px solid #eef4ff}
  pre{background:#0b1220;color:#dff4ff;padding:14px;border-radius:8px;overflow:auto;font-size:13px}
  code{background:#eef6ff;padding:2px 6px;border-radius:4px;color:var(--accent);font-weight:600}
  h2{color:#072147;margin-bottom:8px}
  h3{color:#0b3b91;margin-bottom:6px}
  table{width:100%;border-collapse:collapse;margin-top:10px}
  th,td{padding:10px;border:1px solid #e6eef6;text-align:left;font-size:14px}
  th{background:#f0f6ff;color:#0b3b91}
  .muted{color:var(--muted);font-size:13px}
  .small{font-size:13px;color:var(--muted)}
  .pill{display:inline-block;background:#eef6ff;color:var(--accent);padding:6px 10px;border-radius:999px;font-weight:600;margin:4px 6px 4px 0}
  .ok{color:var(--success);font-weight:700}
  .warn{color:var(--warn);font-weight:700}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
  @media (max-width:980px){.container{margin-left:18px;padding:18px} .sidebar{display:none} .grid{grid-template-columns:1fr}}
  .note{background:#f1f7ff;border-left:4px solid var(--accent);padding:10px;border-radius:6px;margin:10px 0;color:#09366f}
  .example-title{background:#0f172a;color:white;padding:6px 10px;border-radius:6px;display:inline-block;margin-top:8px}
  footer{margin-top:20px;color:var(--muted);font-size:13px;padding-bottom:40px}
</style>
</head>
<body>

<!-- SIDEBAR -->
<aside class="sidebar" aria-label="Navigation">
  <div class="brand">SQL — Today's Learning</div>
  <nav class="nav">
    <a href="#raw">Raw SQL (your input)</a>
    <a href="#summary">Summary & Cleaned SQL</a>
    <a href="#ddls">DDL / DML / DCL Notes</a>
    <a href="#prod">PROD table — examples & outputs</a>
    <a href="#grouping">Grouping & Aggregation</a>
    <a href="#where">WHERE / Filters</a>
    <a href="#window">Window Functions (RANK / DENSE_RANK)</a>
    <a href="#views">Views & COALESCE</a>
    <a href="#pitfalls">Pitfalls & Tips</a>
  </nav>
</aside>

<!-- MAIN CONTAINER -->
<main class="container">
  <header>
    <h1>Today's SQL — converted to HTML</h1>
    <p class="muted">Includes your SQL commands, explained topics, corrected examples, and sample outputs you can use for revision and interviews.</p>
  </header>

  <!-- RAW SQL -->
  <section id="raw" class="card">
    <h2>1. Raw SQL (as provided)</h2>
    <p class="small muted">I preserved your original commands exactly below for reference.</p>
    <pre>
create database employee; 
DROP database EMPLOYEE; 
CREATE DATABASE INSTITUTE; 
USE INSTITUTE; 
CREATE TABLE COURSE (COURSEID INT ,COURSENAME VARCHAR (30),COURSEPRICE BLOB,PRIMARY KEY (COURSEID)); 
INSERT INTO COURSE(COURSEID,COURSENAME,COURSEPRICE) VALUES ('7','PYTHON','2000'),('9','PYTHON','22000'),('8','PYTHON','26000');
 UPDATE COURSE SET COURSENAME ='C++' WHERE COURSEID ='8' AND COURSENAME='PYTHON';
 UPDATE COURSE SET COURSENAME ='SPRING',COURSEPRICE='30000' WHERE COURSEID=4 AND COURSENAME='PYTHON' AND COURSEPRICE =22000; USE INSTITUTE; 
 DELETE FROM COURSE WHERE COURSEID =9; 
 ALTER TABLE COURSE MODIFY COURSEPRICE INT ; 
 DESC COURSE; 
 CREATE TABLE TRAINERS(TRAINER_ID INT ,TRAINER_NAME VARCHAR(40),PRIMARY KEY (TRAINER_ID)); 
 INSERT INTO TRAINERS(TRAINER_ID,TRAINER_NAME) VALUES ('1','VENKATESH'),('2','BADRI'); USE INSTITUTE; 
 CREATE TABLE STUDENTS(STUD_ID INT ,STUD_NAME VARCHAR(30),COURSES_ID INT,TRAINERS_ID INT);
 ALTER TABLE STUDENT ADD CONSTRAINT foreign key(COURSES_ID) references COURSE(COURSEID);
 DROP TABLE STUDENTS;
 SELECT * FROM institute.students; 
 SELECT * FROM institute.course; 
 SELECT * FROM institute.trainers;
 use student;
 ALTER TABLE TRAINER MODIFY TRAINER_ID VARCHAR(20);
 SELECT *FROM STUDENT WHERE STDNAME IN ('AJAY','ANAND');
 use student ;
 
 CREATE TABLE PROD( PROD_ID INT PRIMARY KEY AUTO_INCREMENT, PROD_NAME VARCHAR(30),CUST_NAME VARCHAR(30),COST INT );
 ALTER TABLE PROD  ADD COLUMN PROD_NAME VARCHAR(30);
 INSERT INTO PROD ()
 SELECT PROD_NAME,CUST_NAME ,COST FROM PROD ;
 
 ALTER TABLE STUDENT DROP  COLUMN PROD_NAME;
 INSERT INTO PROD (PROD_NAME,CUST_NAME ,COST) VALUES('A','B',1),('B','C',2),('B','D',4),('A','E',1),('K','E',12);
 INSERT INTO PROD (CUST_NAME ,COST) VALUES('B',1);
 
 SELECT P.PROD_NAME,P.CUST_NAME FROM PROD P GROUP BY P.PROD_ID ;
 SELECT P.PROD_NAME,COUNT (P.PROD_NAME ) FROM PROD P GROUP BY P.PROD_NAME  ;
USE INSTITUTE;
SELECT * FROM PROD;
SELECT P.PROD_NAME ,COUNT(P.PROD_NAME )FROM PROD P GROUP BY P.PROD_NAME ;
SELECT P.CUST_NAME ,COUNT(P.CUST_NAME )FROM PROD P GROUP BY P.CUST_NAME  ;
  
SELECT P.CUST_NAME ,COUNT(P.CUST_NAME )FROM PROD P GROUP BY P.CUST_NAME,P.PROD_NAME HAVING COUNT(P.CUST_NAME ) >1  ;

SELECT * FROM PROD WHERE PROD_NAME ='A' OR PROD_NAME ='B';
SELECT * FROM PROD WHERE PROD_NAME IN ('A','B','K');

SELECT * FROM PROD WHERE PROD_NAME NOT IN ('B','K');

SELECT * FROM PROD WHERE PROD_NAME NOT IN ('A');

SELECT * FROM PROD WHERE PROD_NAME IS NOT NULL ;

SELECT * FROM PROD WHERE PROD_NAME IS  NULL ;

SELECT * FROM PROD WHERE COST>3 OR COST <13 ;
SELECT * FROM PROD WHERE COST BETWEEN 3 AND 13;

SELECT * FROM PROD WHERE PROD_NAME IS NULL;
SELECT P.PROD_ID ,COUNT(P.PROD_ID),(P.PROD_NAME) FROM PROD P  GROUP BY P.PROD_ID,P.PROD_NAME;
SELECT P.PROD_ID ,COUNT(P.PROD_ID),(P.PROD_NAME) FROM PROD P WHERE P.PROD_NAME IS NULL;

SELECT COUNT(*) FROM PROD P WHERE P.PROD_NAME IS NOT NULL;
SELECT COUNT(*) FROM PROD P WHERE P.PROD_NAME IS NULL;
SELECT *FROM STUDENTS  CROSS JOIN TRAINERS; 
USE INSTITUTE;
SELECT *FROM PROD;
SELECT  RANK() OVER (ORDER BY COST DESC) , COST FROM PROD;  
SELECT DENSE_RANK() OVER (ORDER BY COST DESC ) AS RNK, COST FROM PROD;
SELECT *FROM (SELECT DENSE_RANK() OVER (ORDER BY COST DESC ) AS RNK, COST FROM PROD) P WHERE P.RNK=4;
SELECT DENSE_RANK() OVER (ORDER BY PROD_NAME) AS RNK, PROD_NAME  FROM PROD;
  
SELECT DENSE_RANK() OVER (PARTITION BY PROD_NAME ORDER BY COST) AS RNK,COST  FROM PROD;
  
SELECT * FROM PROD ORDER BY  COST  DESC LIMIT 2 ;
DELETE FROM PROD WHERE PROD_ID=7;
SELECT  PROD_ID ,RANK() OVER (ORDER BY COST DESC ) ,COST FROM PROD;
SELECT DENSE_RANK() OVER (ORDER BY PROD_NAME ) AS RNK ,PROD_NAME FROM PROD;
SELECT * FROM (SELECT DENSE_RANK() OVER (ORDER BY PROD_NAME ) AS RNK ,PROD_NAME FROM PROD) P WHERE RNK=3;

SELECT * FROM (SELECT DENSE_RANK() OVER (PARTITION BY PROD_NAME ORDER BY COST) AS RNK ,PROD_NAME FROM PROD) P ;

SELECT * FROM PROD LIMIT 4;
SELECT * FROM PROD WHERE PROD_NAME IN ('A');
SELECT * FROM PROD LIMIT 4 OFFSET 2;

CREATE OR REPLACE VIEW V_DENSE_RANK AS 
SELECT DENSE_RANK() OVER (PARTITION BY PROD_NAME ORDER BY COST) 
AS RNK ,COST ,PROD_NAME FROM PROD LIMIT 4;

SELECT * FROM V_DENSE_RANK WHERE RNK =2 OR COST =1;
SELECT PROD_NAME ,coalesce(PROD_NAME,'DEFAULT') FROM PROD;

SELECT  COUNT(P.RNK),P.RNK FROM (SELECT DENSE_RANK() OVER ( ORDER BY COST) 
AS RNK ,COST ,PROD_NAME FROM PROD) P GROUP BY P.RNK; 
    </pre>
  </section>

  <!-- SUMMARY / CLEANED -->
  <section id="summary" class="card">
    <h2>2. Summary & Cleaned, runnable SQL (recommended)</h2>
    <p class="small muted">I corrected duplicate/ambiguous statements, removed nonsensical ALTER/INSERT combos, and provided a runnable sequence. Run these on <code>MySQL 8+</code> (for window functions).</p>

    <pre>
-- create and use DB
CREATE DATABASE IF NOT EXISTS INSTITUTE;
USE INSTITUTE;

-- Course table
CREATE TABLE IF NOT EXISTS COURSE (
  COURSEID INT PRIMARY KEY AUTO_INCREMENT,
  COURSENAME VARCHAR(50),
  COURSEPRICE INT
);

-- Trainers
CREATE TABLE IF NOT EXISTS TRAINERS (
  TRAINER_ID INT PRIMARY KEY AUTO_INCREMENT,
  TRAINER_NAME VARCHAR(60)
);

-- Students
CREATE TABLE IF NOT EXISTS STUDENTS (
  STUD_ID INT PRIMARY KEY AUTO_INCREMENT,
  STUD_NAME VARCHAR(60),
  COURSES_ID INT,
  TRAINERS_ID INT,
  FOREIGN KEY (COURSES_ID) REFERENCES COURSE(COURSEID),
  FOREIGN KEY (TRAINERS_ID) REFERENCES TRAINERS(TRAINER_ID)
);

-- Product table
CREATE TABLE IF NOT EXISTS PROD (
  PROD_ID INT PRIMARY KEY AUTO_INCREMENT,
  PROD_NAME VARCHAR(30),
  CUST_NAME VARCHAR(30),
  COST INT
);

-- Sample inserts (consistent)
INSERT INTO COURSE (COURSENAME, COURSEPRICE) VALUES 
  ('PYTHON',2000), ('JAVA',20000), ('SQL',22000), ('C++',19000);

INSERT INTO TRAINERS (TRAINER_NAME) VALUES ('VENKATESH'), ('BADRI');

INSERT INTO STUDENTS (STUD_NAME, COURSES_ID, TRAINERS_ID) VALUES
 ('AJAY',1,1), ('ANAND',2,1), ('NEHA',1,2);

INSERT INTO PROD (PROD_NAME, CUST_NAME, COST) VALUES
 ('A','B',1), ('B','C',2), ('B','D',4), ('A','E',1), ('K','E',12), (NULL,'B',1);
    </pre>

    <div class="note">
      <strong>Why this cleaned sequence?</strong>
      <ul>
        <li>AUTO_INCREMENT used so IDs are unique and not manually duplicated.</li>
        <li>Course price should be numeric (INT) — avoid BLOB for prices.</li>
        <li>Window functions (RANK/DENSE_RANK) require MySQL 8+.</li>
      </ul>
    </div>
  </section>

  <!-- DDL / DML NOTES -->
  <section id="ddls" class="card">
    <h2>3. Quick reference — DDL / DML / DQL / TCL</h2>
    <div class="grid">
      <div>
        <h3>DDL (Structure)</h3>
        <p class="small">CREATE, ALTER, DROP. Example:</p>
        <pre>ALTER TABLE COURSE MODIFY COURSEPRICE INT;</pre>
      </div>
      <div>
        <h3>DML (Data)</h3>
        <p class="small">INSERT, UPDATE, DELETE, TRUNCATE. Example:</p>
        <pre>UPDATE COURSE SET COURSENAME='C++' WHERE COURSEID=8;</pre>
      </div>
    </div>
  </section>

  <!-- PROD TABLE EXAMPLES -->
  <section id="prod" class="card">
    <h2>4. PROD table — queries, outputs & explanation</h2>
    <p class="small muted">Inserted sample rows (see cleaned SQL). Below are important queries you used with explanatory outputs.</p>

    <h3>Full table (<code>SELECT * FROM PROD</code>)</h3>
    <table>
      <thead><tr><th>PROD_ID</th><th>PROD_NAME</th><th>CUST_NAME</th><th>COST</th></tr></thead>
      <tbody>
        <tr><td>1</td><td>A</td><td>B</td><td>1</td></tr>
        <tr><td>2</td><td>B</td><td>C</td><td>2</td></tr>
        <tr><td>3</td><td>B</td><td>D</td><td>4</td></tr>
        <tr><td>4</td><td>A</td><td>E</td><td>1</td></tr>
        <tr><td>5</td><td>K</td><td>E</td><td>12</td></tr>
        <tr><td>6</td><td>NULL</td><td>B</td><td>1</td></tr>
      </tbody>
    </table>

    <h3>Group by product name — count and sum</h3>
    <pre>SELECT PROD_NAME, COUNT(*) AS cnt, SUM(COST) AS total_cost FROM PROD GROUP BY PROD_NAME;</pre>

    <table>
      <thead><tr><th>PROD_NAME</th><th>cnt</th><th>total_cost</th></tr></thead>
      <tbody>
        <tr><td>A</td><td>2</td><td>2</td></tr>
        <tr><td>B</td><td>2</td><td>6</td></tr>
        <tr><td>K</td><td>1</td><td>12</td></tr>
        <tr><td>NULL</td><td>1</td><td>1</td></tr>
      </tbody>
    </table>

    <h3>Products with cost between 3 and 13</h3>
    <pre>SELECT * FROM PROD WHERE COST BETWEEN 3 AND 13;</pre>
    <table><thead><tr><th>PROD_ID</th><th>PROD_NAME</th><th>COST</th></tr></thead>
    <tbody><tr><td>3</td><td>B</td><td>4</td></tr><tr><td>5</td><td>K</td><td>12</td></tr></tbody></table>

    <h3>Rows where prod_name IS NULL</h3>
    <pre>SELECT * FROM PROD WHERE PROD_NAME IS NULL;</pre>
    <table><thead><tr><th>PROD_ID</th><th>CUST_NAME</th><th>COST</th></tr></thead>
      <tbody><tr><td>6</td><td>B</td><td>1</td></tr></tbody>
    </table>

    <h3>COUNT of non-null / null prod_name</h3>
    <pre>SELECT COUNT(*) FROM PROD WHERE PROD_NAME IS NOT NULL; -- =5
SELECT COUNT(*) FROM PROD WHERE PROD_NAME IS NULL; -- =1</pre>

    <div class="note">Note: <code>IN</code>, <code>NOT IN</code>, <code>IS NULL</code> behave differently; test with both data and NULL cases.</div>
  </section>

  <!-- GROUPING & AGG -->
  <section id="grouping" class="card">
    <h2>5. Grouping, HAVING, Aggregation — examples</h2>

    <h3>Count customers per name</h3>
    <pre>SELECT CUST_NAME, COUNT(*) AS cnt FROM PROD GROUP BY CUST_NAME;</pre>
    <table><thead><tr><th>CUST_NAME</th><th>cnt</th></tr></thead>
      <tbody><tr><td>B</td><td>3</td></tr><tr><td>C</td><td>1</td></tr><tr><td>D</td><td>1</td></tr><tr><td>E</td><td>2</td></tr></tbody>
    </table>

    <h3>HAVING example — customers appearing >1 times</h3>
    <pre>SELECT CUST_NAME, COUNT(*) FROM PROD GROUP BY CUST_NAME HAVING COUNT(*) &gt; 1;</pre>
    <p class="small">Output: <span class="ok">B (3)</span>, <span class="ok">E (2)</span></p>
  </section>

  <!-- WHERE / FILTERS -->
  <section id="where" class="card">
    <h2>6. WHERE / Filters — quick examples</h2>

    <div class="grid">
      <div>
        <h3>IN / NOT IN</h3>
        <pre>SELECT * FROM PROD WHERE PROD_NAME IN ('A','B');</pre>
        <p class="small">Returns rows where PROD_NAME is A or B. NULLs excluded.</p>
      </div>
      <div>
        <h3>BETWEEN / Comparisons</h3>
        <pre>SELECT * FROM PROD WHERE COST BETWEEN 3 AND 13;</pre>
      </div>
    </div>

    <div class="note">Important: Using <code>NOT IN</code> with a list that contains NULL behaves unexpectedly — prefer <code>NOT EXISTS</code> or handle NULL explicitly.</div>
  </section>

  <!-- WINDOW FUNCTIONS -->
  <section id="window" class="card">
    <h2>7. Window Functions — RANK & DENSE_RANK (MySQL 8+)</h2>
    <p class="small muted">Window functions assign ranks without collapsing rows. Available in MySQL 8+, PostgreSQL, SQL Server, Oracle, etc.</p>

    <h3>RANK() example</h3>
    <pre>SELECT PROD_ID, PROD_NAME, COST, 
 RANK() OVER (ORDER BY COST DESC) AS rnk
FROM PROD;</pre>

    <h3>Sample output</h3>
    <table><thead><tr><th>PROD_ID</th><th>PROD_NAME</th><th>COST</th><th>rnk</th></tr></thead>
      <tbody>
        <tr><td>5</td><td>K</td><td>12</td><td>1</td></tr>
        <tr><td>3</td><td>B</td><td>4</td><td>2</td></tr>
        <tr><td>2</td><td>B</td><td>2</td><td>3</td></tr>
        <tr><td>1</td><td>A</td><td>1</td><td>4</td></tr>
        <tr><td>4</td><td>A</td><td>1</td><td>4</td></tr>
        <tr><td>6</td><td>NULL</td><td>1</td><td>4</td></tr>
      </tbody>
    </table>

    <h3>DENSE_RANK() example (partitioned)</h3>
    <pre>SELECT PROD_ID, PROD_NAME, COST,
 DENSE_RANK() OVER (PARTITION BY PROD_NAME ORDER BY COST) AS dr
FROM PROD;</pre>

    <p class="small">This restarts ranking for each product name group and has no gaps.</p>
  </section>

  <!-- VIEWS & COALESCE -->
  <section id="views" class="card">
    <h2>8. Views, COALESCE & small helpers</h2>

    <h3>View Example</h3>
    <pre>CREATE OR REPLACE VIEW V_DENSE_RANK AS
 SELECT DENSE_RANK() OVER (PARTITION BY PROD_NAME ORDER BY COST) AS RNK, COST, PROD_NAME
 FROM PROD;
 
SELECT * FROM V_DENSE_RANK WHERE RNK = 2 OR COST = 1;</pre>

    <h3>COALESCE</h3>
    <p class="small">Replaces NULL with a default value:</p>
    <pre>SELECT PROD_ID, COALESCE(PROD_NAME,'DEFAULT') AS PROD_NAME_FIXED FROM PROD;</pre>

    <table><thead><tr><th>PROD_ID</th><th>PROD_NAME_FIXED</th></tr></thead>
      <tbody>
        <tr><td>1</td><td>A</td></tr>
        <tr><td>6</td><td>DEFAULT</td></tr>
      </tbody>
    </table>
  </section>

  <!-- PITFALLS -->
  <section id="pitfalls" class="card">
    <h2>9. Pitfalls, best practices & interview tips</h2>
    <ul class="small">
      <li><b>Do not manually insert AUTO_INCREMENT primary keys</b> unless you know what you do — let DB assign IDs.</li>
      <li><b>Use correct data types:</b> price/cost as numeric (INT/DECIMAL), not BLOB or VARCHAR.</li>
      <li><b>NULLs affect logic:</b> comparisons with NULL return UNKNOWN. Use IS NULL / IS NOT NULL / COALESCE.</li>
      <li><b>UNION requires same column count and compatible types.</b></li>
      <li><b>Window functions require MySQL 8+.</b> For older MySQL use user variables or move to PostgreSQL/SQL Server for simpler syntax.</li>
      <li><b>GROUP BY:</b> columns in SELECT must be grouped or aggregated (MySQL ONLY_FULL_GROUP_BY mode may enforce stricter rules).</li>
      <li><b>Testing:</b> first INSERT parent rows (Course / Trainer) before inserting child rows (Students) when using foreign keys.</li>
    </ul>

    <div class="note">
      Interview tip: when asked "difference between RANK and DENSE_RANK" — answer: RANK gives gaps when ties exist; DENSE_RANK does not.
    </div>
  </section>

  <footer>
    <div class="small muted">Prepared for quick revision — run the cleaned SQL on a test database first. If you want, I can export this page to PDF, add interactive code-run buttons, or generate printable one-page cheat-sheets. Tell me which format you prefer.</div>
  </footer>

</main>
</body>
</html>
